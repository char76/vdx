/*
 * All files in this project are distributed under the GNU General
 * Public License. This is Free Software.
 */
// ---------------------------------------
// FontSelect_base.C
//
// This file was automaticly generated by
// View Designer/X v1.2
//
// User: lazy@apfel
// Date: Tue Jun  2 17:02:44 1998
//
// Don't edit this file, please !
// ---------------------------------------


// Include class definition

#include "FontSelect_base.h"

// Include X11 header
#include <X11/xpm.h>

// Include OSF/Motif header files
#include <Xm/Frame.h>
#include <X11/Shell.h>
#include <lwid/CellTable.h>
#include <Xm/RowColumn.h>
#include <Xm/PushB.h>
#include <Xm/ScrolledW.h>
#include <Xm/List.h>
#include <Xm/Text.h>
#include <Xm/Separator.h>
#include <lwid/ButtonBox.h>
#include <Xm/Label.h>








#define RES_CONVERT(t,s) cvtResourceFromString(parent, t, s)


// -----------------------------------
// FontSelect_base(parent,args,n)
// -----------------------------------

FontSelect_base::FontSelect_base(Widget p, ArgList f_args, Cardinal f_n, char *fbRes)
{
  Widget parent;
  Arg args[100];
  Cardinal n = 0;

  if(p) 
    parent = p;
  else
    parent = getTopLevel();

  if(fbRes) {
    XrmDatabase database, fallback;
    
    fallback = XrmGetStringDatabase(fbRes);
    database = XrmGetDatabase(XtDisplay(parent));
    
    XrmCombineDatabase(fallback, &database, FALSE);
  }

  if(!XtIsShell(parent)) {
    FontSelect = XtCreateWidget("FontSelect",xmFrameWidgetClass,
				       parent,f_args,f_n);
  } else { 
     XtSetArg(args[n], "iconPixmap", createPixmapFromFile("FontChooser.xpm")); n++;
  XtSetArg(args[n], "title", "Font Chooser"); n++;

    popupShell = FontSelect = XtCreatePopupShell("FontSelect", topLevelShellWidgetClass,
			parent, args, n);
  }
  createWidgets();
  addCallbacks();
  addRelations();
}


// ----------------------------
// createWidgets()
// ----------------------------

void FontSelect_base::createWidgets()
{
  Widget parent;           // the parent for every widget
  Arg args[100];           // resource list
  Cardinal n;              // number of resources

  // Now we create every Widget

  
  /* ---------- Creating Widget:    fontCellTable -------------- */
  parent = FontSelect;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "resizeColumn", 0); n++;
  XtSetArg(args[n], "resizeRow", 1); n++;


  /* Creating Widget */
  fontCellTable = XtCreateWidget("fontCellTable", xlCellTableWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(fontCellTable);
  
  addQuickHelp(fontCellTable);
  addHelpId(fontCellTable,11);

  
  /* ---------- Creating Widget:    fontFilterRowColumn -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "orientation", 2); n++;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 0); n++;


  /* Creating Widget */
  fontFilterRowColumn = XtCreateWidget("fontFilterRowColumn", xmRowColumnWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(fontFilterRowColumn);
  
  addQuickHelp(fontFilterRowColumn);
  addHelpId(fontFilterRowColumn,-1);

  
  /* ---------- Creating Widget:    companyMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 40); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  companyMenu = XmCreatePulldownMenu( parent, "companyMenu", args, n);
  
  addQuickHelp(companyMenu);
  addHelpId(companyMenu,-1);

  
  /* ---------- Creating Widget:    companyDontCare -------------- */
  parent = companyMenu;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 0); n++;
  XtSetArg(args[n], "y", 0); n++;
  XtSetArg(args[n], "labelString", RES_CONVERT("XmString", "*")); n++;


  /* Creating Widget */
  companyDontCare = XtCreateWidget("companyDontCare", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(companyDontCare);
  
  addQuickHelp(companyDontCare);
  addHelpId(companyDontCare,-1);

  
  /* ---------- Creating Widget:    companyOptionMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 10); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  companyOptionMenu = XmCreateOptionMenu( parent, "companyOptionMenu", args, n);
  
  /* Manage the Widget */
  XtManageChild(companyOptionMenu);
  
  addQuickHelp(companyOptionMenu);
  addHelpId(companyOptionMenu,-1);

  
  /* ---------- Creating Widget:    familyMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 40); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  familyMenu = XmCreatePulldownMenu( parent, "familyMenu", args, n);
  
  addQuickHelp(familyMenu);
  addHelpId(familyMenu,-1);

  
  /* ---------- Creating Widget:    familyDontCare -------------- */
  parent = familyMenu;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 0); n++;
  XtSetArg(args[n], "y", 0); n++;
  XtSetArg(args[n], "labelString", RES_CONVERT("XmString", "*")); n++;


  /* Creating Widget */
  familyDontCare = XtCreateWidget("familyDontCare", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(familyDontCare);
  
  addQuickHelp(familyDontCare);
  addHelpId(familyDontCare,-1);

  
  /* ---------- Creating Widget:    familyOptionMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 70); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  familyOptionMenu = XmCreateOptionMenu( parent, "familyOptionMenu", args, n);
  
  /* Manage the Widget */
  XtManageChild(familyOptionMenu);
  
  addQuickHelp(familyOptionMenu);
  addHelpId(familyOptionMenu,-1);

  
  /* ---------- Creating Widget:    sizeMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 40); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  sizeMenu = XmCreatePulldownMenu( parent, "sizeMenu", args, n);
  
  addQuickHelp(sizeMenu);
  addHelpId(sizeMenu,-1);

  
  /* ---------- Creating Widget:    sizeDontCare -------------- */
  parent = sizeMenu;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "x", 0); n++;
  XtSetArg(args[n], "y", 0); n++;
  XtSetArg(args[n], "labelString", RES_CONVERT("XmString", "*")); n++;


  /* Creating Widget */
  sizeDontCare = XtCreateWidget("sizeDontCare", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(sizeDontCare);
  
  addQuickHelp(sizeDontCare);
  addHelpId(sizeDontCare,-1);

  
  /* ---------- Creating Widget:    sizeOptionMenu -------------- */
  parent = fontFilterRowColumn;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "height", 30); n++;
  XtSetArg(args[n], "width", 50); n++;
  XtSetArg(args[n], "x", 120); n++;
  XtSetArg(args[n], "y", 10); n++;


  /* Creating Widget */
  sizeOptionMenu = XmCreateOptionMenu( parent, "sizeOptionMenu", args, n);
  
  /* Manage the Widget */
  XtManageChild(sizeOptionMenu);
  
  addQuickHelp(sizeOptionMenu);
  addHelpId(sizeOptionMenu,-1);

  
  /* ---------- Creating Widget:    listScrolledWindow -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 1); n++;


  /* Creating Widget */
  listScrolledWindow = XtCreateWidget("listScrolledWindow", xmScrolledWindowWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(listScrolledWindow);
  
  addQuickHelp(listScrolledWindow);
  addHelpId(listScrolledWindow,-1);

  
  /* ---------- Creating Widget:    fontList -------------- */
  parent = listScrolledWindow;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "height", 160); n++;
  XtSetArg(args[n], "width", 392); n++;
  XtSetArg(args[n], "x", 0); n++;
  XtSetArg(args[n], "y", 20); n++;


  /* Creating Widget */
  fontList = XtCreateWidget("fontList", xmListWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(fontList);
  
  addQuickHelp(fontList);
  addHelpId(fontList,-1);

  
  /* ---------- Creating Widget:    sampleText -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "editMode", 0); n++;
  XtSetArg(args[n], "rows", 4); n++;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 2); n++;


  /* Creating Widget */
  sampleText = XtCreateWidget("sampleText", xmTextWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(sampleText);
  
  addQuickHelp(sampleText);
  addHelpId(sampleText,-1);

  
  /* ---------- Creating Widget:    fontSelection -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 3); n++;


  /* Creating Widget */
  fontSelection = XtCreateWidget("fontSelection", xmTextWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(fontSelection);
  
  addQuickHelp(fontSelection);
  addHelpId(fontSelection,-1);

  
  /* ---------- Creating Widget:    separator -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 4); n++;


  /* Creating Widget */
  separator = XtCreateWidget("separator", xmSeparatorWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(separator);
  
  addQuickHelp(separator);
  addHelpId(separator,-1);

  
  /* ---------- Creating Widget:    buttonBox -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "spacing", 6); n++;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 5); n++;


  /* Creating Widget */
  buttonBox = XtCreateWidget("buttonBox", xlButtonBoxWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(buttonBox);
  
  addQuickHelp(buttonBox);
  addHelpId(buttonBox,-1);

  
  /* ---------- Creating Widget:    okButton -------------- */
  parent = buttonBox;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "height", 30); n++;
  XtSetArg(args[n], "width", 80); n++;
  XtSetArg(args[n], "x", 10); n++;
  XtSetArg(args[n], "y", 314); n++;


  /* Creating Widget */
  okButton = XtCreateWidget("okButton", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(okButton);
  
  addQuickHelp(okButton);
  addHelpId(okButton,-1);

  
  /* ---------- Creating Widget:    cancelButton -------------- */
  parent = buttonBox;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "height", 30); n++;
  XtSetArg(args[n], "width", 80); n++;
  XtSetArg(args[n], "x", 210); n++;
  XtSetArg(args[n], "y", 314); n++;


  /* Creating Widget */
  cancelButton = XtCreateWidget("cancelButton", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(cancelButton);
  
  addQuickHelp(cancelButton);
  addHelpId(cancelButton,-1);

  
  /* ---------- Creating Widget:    helpButton -------------- */
  parent = buttonBox;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "height", 30); n++;
  XtSetArg(args[n], "width", 80); n++;
  XtSetArg(args[n], "x", 410); n++;
  XtSetArg(args[n], "y", 314); n++;


  /* Creating Widget */
  helpButton = XtCreateWidget("helpButton", xmPushButtonWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(helpButton);
  
  addQuickHelp(helpButton);
  addHelpId(helpButton,-1);

  
  /* ---------- Creating Widget:    quickHelp -------------- */
  parent = fontCellTable;

  /* Building resource list */
  n = 0;
  XtSetArg(args[n], "alignment", 0); n++;
  XtSetArg(args[n], "cellColumn", 0); n++;
  XtSetArg(args[n], "cellRow", 6); n++;


  /* Creating Widget */
  quickHelp = XtCreateWidget("quickHelp", xmLabelWidgetClass,
			parent, args, n);
  
  /* Manage the Widget */
  XtManageChild(quickHelp);
  
  addQuickHelp(quickHelp);
  addHelpId(quickHelp,-1);


}



// ----------------------------
// addCallbacks()
// ----------------------------

void FontSelect_base::addCallbacks()
{

  XtAddCallback( companyMenu, "entryCallback",
                 companyChanged_CB, this);

  XtAddCallback( familyMenu, "entryCallback",
                 familyChanged_CB, this);

  XtAddCallback( sizeMenu, "entryCallback",
                 sizeChanged_CB, this);

  XtAddCallback( fontList, "browseSelectionCallback",
                 fontSelected_CB, this);

  XtAddCallback( fontSelection, "activateCallback",
                 fontTextChanged_CB, this);

  XtAddCallback( okButton, "activateCallback",
                 fontSelectOk_CB, this);

  XtAddCallback( cancelButton, "activateCallback",
                 fontSelectCancel_CB, this);

  XtAddCallback( helpButton, "activateCallback",
                 fontSelectHelp_CB, this);

}



// ----------------------------
// addRelations()
// ----------------------------

void FontSelect_base::addRelations()
{
  XtVaSetValues(companyOptionMenu, "subMenuId", companyMenu, NULL);

  XtVaSetValues(familyOptionMenu, "subMenuId", familyMenu, NULL);

  XtVaSetValues(sizeOptionMenu, "subMenuId", sizeMenu, NULL);


}


// ----------------------------
// manageWidget()
// ----------------------------
void FontSelect_base::manageWidget(Widget, XtPointer c, XtPointer)
{
  XtManageChild((Widget)c);
}


// ----------------------------
// createPixmapFromData()
// ----------------------------

Pixmap FontSelect_base::createPixmapFromData(char **data)
{
  Pixmap pix, mask;
  XpmAttributes attr;

  memset(&attr, 0, sizeof(attr));
  attr.valuemask = XpmReturnPixels;

  if( !XpmCreatePixmapFromData(XtDisplay(LicView::getTopLevel()),
		               XRootWindowOfScreen(XtScreen(LicView::getTopLevel())),
			       data,
			       &pix, &mask, &attr) )
    return pix;
  return XmUNSPECIFIED_PIXMAP;
}

// ------------------------------------------
// createPixmapFromFile()
//
// Creating a pixmap by XpmRaedFileToPixmap()
// Uses XFILESEARCHPATH to find the pixmap
// default path: /usr/lib/X11/pixmaps/%N.xpm
// ------------------------------------------

Pixmap FontSelect_base::createPixmapFromFile(char *name)
{
  String string;
  Pixmap pix, mask;
  XpmAttributes attr;

  string = XtResolvePathname(XtDisplay(LicView::getTopLevel()),
			     "pixmaps", name, "", NULL,
			     NULL, 0, NULL);
  if(string) {
    memset(&attr, 0, sizeof(attr));
    attr.valuemask = XpmReturnPixels;
    if( !XpmReadFileToPixmap(XtDisplay(LicView::getTopLevel()),
			     XRootWindowOfScreen(
			     XtScreen(LicView::getTopLevel())),
			     string,
			     &pix, &mask, &attr) )
      return pix;
    return XmUNSPECIFIED_PIXMAP;
    XtFree(string);
  }
  return XmUNSPECIFIED_PIXMAP;
}

// ---------------------------------------------------------
// Following class method are used as a callback.
// The method is calling a abstract virtual method, which
// must be overloaded in the derived class 'FontSelect'
// ---------------------------------------------------------

void FontSelect_base::companyChanged_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->companyChanged(wg,callData);
}

void FontSelect_base::familyChanged_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->familyChanged(wg,callData);
}

void FontSelect_base::sizeChanged_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->sizeChanged(wg,callData);
}

void FontSelect_base::fontSelected_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->fontSelected(wg,callData);
}

void FontSelect_base::fontTextChanged_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->fontTextChanged(wg,callData);
}

void FontSelect_base::fontSelectOk_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->fontSelectOk(wg,callData);
}

void FontSelect_base::fontSelectCancel_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->fontSelectCancel(wg,callData);
}

void FontSelect_base::fontSelectHelp_CB(Widget wg, XtPointer clientData, XtPointer callData)
{
   ((FontSelect_base*)clientData)->fontSelectHelp(wg,callData);
}


