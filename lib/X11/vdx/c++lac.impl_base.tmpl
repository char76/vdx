// ---------------------------------------
// $(NAME)_base.C
//
// This file was automaticly generated by
// View Designer/X $(VDX_VERSION)
//
// User: $(USER)
// Date: $(DATE)
//
// Don't edit this file, please !
// ---------------------------------------


// Include class definition

#include "$(NAME)_base.h"

// Include X11 header
#include <X11/xpm.h>

// Include OSF/Motif header files
#include <Xm/Frame.h>
$(HEADERS,c++lac.headers.tmpl)


$(LOCALHEADERS,c++.localheaders.tmpl)

$(LINKS,c++lac.links_header.tmpl)


#define RES_CONVERT(t,s) cvtResourceFromString(parent, t, s)


// -----------------------------------
// $(NAME)_base(parent,args,n)
// -----------------------------------

$(NAME)_base::$(NAME)_base(Widget p, ArgList f_args, Cardinal f_n, char *fbRes)
{
  Widget parent;
  Arg args[100];
  Cardinal n = 0;

  if(p) 
    parent = p;
  else
    parent = getTopLevel();

  if(fbRes) {
    XrmDatabase database, fallback;
    
    fallback = XrmGetStringDatabase(fbRes);
    database = XrmGetDatabase(XtDisplay(parent));
    
    XrmCombineDatabase(fallback, &database, FALSE);
  }

  if(!XtIsShell(parent)) {
    $(SHELLIDENTIFIER) = XtCreateWidget("$(NAME)",xmFrameWidgetClass,
				       parent,f_args,f_n);
  } else { 
   $(SHELLRESOURCES,c++lac.resources.tmpl)
    popupShell = $(SHELLIDENTIFIER) = $(SHELLCREATION);
  }
  createWidgets();
  addCallbacks();
  addRelations();
}


// ----------------------------
// createWidgets()
// ----------------------------

void $(NAME)_base::createWidgets()
{
  Widget parent;           // the parent for every widget
  Arg args[100];           // resource list
  Cardinal n;              // number of resources

  // Now we create every Widget

$(WIDGETS,c++lac.widgetcreation.tmpl)
}



// ----------------------------
// addCallbacks()
// ----------------------------

void $(NAME)_base::addCallbacks()
{
$(CALLBACKS,c++lac.addcallbacks.tmpl)
}



// ----------------------------
// addRelations()
// ----------------------------

void $(NAME)_base::addRelations()
{
$(RELATIONS,c++lac.relations.tmpl)
}


// ----------------------------
// manageWidget()
// ----------------------------
void $(NAME)_base::manageWidget(Widget, XtPointer c, XtPointer)
{
  XtManageChild((Widget)c);
}


// ----------------------------
// createPixmapFromData()
// ----------------------------

Pixmap $(NAME)_base::createPixmapFromData(char **data)
{
  Pixmap pix, mask;
  XpmAttributes attr;

  memset(&attr, 0, sizeof(attr));
  attr.valuemask = XpmReturnPixels;

  if( !XpmCreatePixmapFromData(XtDisplay(LicView::getTopLevel()),
		               XRootWindowOfScreen(XtScreen(LicView::getTopLevel())),
			       data,
			       &pix, &mask, &attr) )
    return pix;
  return XmUNSPECIFIED_PIXMAP;
}

// ------------------------------------------
// createPixmapFromFile()
//
// Creating a pixmap by XpmRaedFileToPixmap()
// Uses XFILESEARCHPATH to find the pixmap
// default path: /usr/lib/X11/pixmaps/%N.xpm
// ------------------------------------------

Pixmap $(NAME)_base::createPixmapFromFile(char *name)
{
  String string;
  Pixmap pix, mask;
  XpmAttributes attr;

  string = XtResolvePathname(XtDisplay(LicView::getTopLevel()),
			     "pixmaps", name, "", NULL,
			     NULL, 0, NULL);
  if(string) {
    memset(&attr, 0, sizeof(attr));
    attr.valuemask = XpmReturnPixels;
    if( !XpmReadFileToPixmap(XtDisplay(LicView::getTopLevel()),
			     XRootWindowOfScreen(
			     XtScreen(LicView::getTopLevel())),
			     string,
			     &pix, &mask, &attr) )
      return pix;
    return XmUNSPECIFIED_PIXMAP;
    XtFree(string);
  }
  return XmUNSPECIFIED_PIXMAP;
}

// ---------------------------------------------------------
// Following class method are used as a callback.
// The method is calling a abstract virtual method, which
// must be overloaded in the derived class '$(NAME)'
// ---------------------------------------------------------

$(METHODS,c++lac.static_cb.tmpl)
